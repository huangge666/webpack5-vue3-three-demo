(self.webpackChunkwebpack5_vue3_three_demo=self.webpackChunkwebpack5_vue3_three_demo||[]).push([[826],{7097:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return x}});var s=i(2005),n={id:"container"},r={class:"mask"},a={class:"content"},o={class:"score-container"},h=function(e){return(0,s.pushScopeId)("data-v-18502305"),e=e(),(0,s.popScopeId)(),e}((function(){return(0,s.createElementVNode)("p",{class:"title"},"本次得分",-1)})),c={class:"score"},u={class:"info"},l={class:"gaming-score"},p=(0,s.createTextVNode)(" 得分："),d={class:"current-score"};i(9070),i(7941),i(2526),i(7327),i(1539),i(5003),i(4747),i(9337),i(3321),i(6699),i(2023);var f=i(2212),m=i(2886);function b(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var g=window.innerWidth,v=window.innerHeight,j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={background:2631720,ground:-1,cubeColor:12500670,cubeWidth:4,cubeHeight:2,cubeDeep:4,jumperColor:2302755,jumperWidth:1,jumperHeight:2,jumperDeep:1},this.score=0,this.scene=new f.xsS,this.camera=new f.iKG(g/-50,g/50,v/50,v/-50,0,5e3),this.cameraPros={current:new f.Pa4(0,0,0),next:new f.Pa4(0,0,0)},this.renderer=new f.CP7({antialias:!0}),this.size={width:g,height:v},this.cubes=[],this.cubeStat={nextDir:""},this.jumperStat={ready:!1,xSpeed:0,ySpeed:0},this.fallState={location:-1,distance:0},this.fallingStat={end:!1,speed:.2}}var t,i,s;return t=e,(i=[{key:"init",value:function(){var e=this;this._setCamera(),this._setRenderer(),this._setLight(),this._createCube(),this._createCube(),this._createJumper(),this._updateCamera(),this._handleWindowResize(),window.addEventListener("resize",(function(){e._handleWindowResize()}));var t=document.querySelector("canvas");t.addEventListener("pointerdown",(function(){e._handleMouseDown()})),t.addEventListener("pointerup",(function(){e._handleMouseUp()}))}},{key:"_addSuccessFn",value:function(e){this.successCallback=e}},{key:"_addFailedFn",value:function(e){this.failedCallback=e}},{key:"_handleWindowResize",value:function(){this._setSize(),this.camera.left=this.size.width/-80,this.camera.right=this.size.width/80,this.camera.top=this.size.height/80,this.camera.bottom=this.size.height/-80,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.size.width,this.size.height),this._render()}},{key:"_handleMouseDown",value:function(){var e=this;!this.jumperStat.ready&&this.jumper.scale.y>.02&&(this.jumper.scale.y-=.01,this.jumperStat.xSpeed+=.004,this.jumperStat.ySpeed+=.008,this._render(),requestAnimationFrame((function(){e._handleMouseDown()})))}},{key:"_handleMouseUp",value:function(){var e=this;this.jumperStat.ready=!0,this.jumper.position.y>=1?(this.jumper.scale.y<1&&(this.jumper.scale.y+=.1),"left"==this.cubeStat.nextDir?this.jumper.position.x-=this.jumperStat.xSpeed:this.jumper.position.z-=this.jumperStat.xSpeed,this.jumper.position.y+=this.jumperStat.ySpeed,this.jumperStat.ySpeed-=.01,this._render(),requestAnimationFrame((function(){e._handleMouseUp()}))):(this.jumperStat.ready=!1,this.jumperStat.xSpeed=0,this.jumperStat.ySpeed=0,this.jumper.position.y=1,this.jumper.scale.y=1,this._checkInCube(),1==this.fallState.location?(this.score++,this._createCube(),this._updateCamera(),this.successCallback&&this.successCallback(this.score)):this._falling())}},{key:"_checkInCube",value:function(){var e,t,i=(this.config.jumperWidth+this.config.cubeWidth)/2;"left"==this.cubeStat.nextDir?(e=Math.abs(this.jumper.position.x-this.cubes[this.cubes.length-2].position.x),t=Math.abs(this.jumper.position.x-this.cubes[this.cubes.length-1].position.x)):(e=Math.abs(this.jumper.position.z-this.cubes[this.cubes.length-2].position.z),t=Math.abs(this.jumper.position.z-this.cubes[this.cubes.length-1].position.z)),e<i?(this.fallState.distance=e,this.fallState.location=e<this.config.cubeWidth/2?-1:-10):t<i?(this.fallState.distance=t,this.fallState.location=t<this.config.cubeWidth/2?1:10):this.fallState.location=0}},{key:"_falling",value:function(){10==this.fallState.location?"left"==this.cubeStat.nextDir?this.jumper.position.x>this.cubes[this.cubes.length-1].position.x?this._fallingRotate("leftBottom"):this._fallingRotate("leftTop"):this.jumper.position.z>this.cubes[this.cubes.length-1].position.z?this._fallingRotate("rightBottom"):this._fallingRotate("rightTop"):-10==this.fallState.location?"left"==this.cubeStat.nextDir?this._fallingRotate("leftTop"):this._fallingRotate("rightTop"):0==this.fallState.location&&this._fallingRotate("none")}},{key:"_fallingRotate",value:function(e){var t=this,i=this.fallState.distance-this.config.cubeWidth/2,s=e.includes("left")?"z":"x",n=this.jumper.rotation[s]+.1,r=this.jumper.rotation[s]<Math.PI/2,a=this.config.ground+this.config.jumperWidth/2+i;if("rightTop"===e)n=this.jumper.rotation[s]-.1,r=this.jumper.rotation[s]>-Math.PI/2;else if("rightBottom"===e)n=this.jumper.rotation[s]+.1,r=this.jumper.rotation[s]<Math.PI/2;else if("leftBottom"===e)n=this.jumper.rotation[s]-.1,r=this.jumper.rotation[s]>-Math.PI/2;else if("leftTop"===e)n=this.jumper.rotation[s]+.1,r=this.jumper.rotation[s]<Math.PI/2;else{if("none"!==e)throw Error("Arguments Error");r=!1,a=this.config.ground}this.fallingStat.end?this.failedCallback&&this.failedCallback():(r?this.jumper.rotation[s]=n:this.jumper.position.y>a?this.jumper.position.y-=.2:this.fallingStat.end=!0,this._render(),requestAnimationFrame((function(){t._falling()})))}},{key:"_setCamera",value:function(){this.camera.position.set(100,100,100),this.camera.lookAt(this.cameraPros.current)}},{key:"_setRenderer",value:function(){this.renderer.setSize(this.size.width,this.size.height),this.renderer.setClearColor(this.config.background),document.querySelector("#container").appendChild(this.renderer.domElement)}},{key:"_setControls",value:function(){this.controls=new m.z(this.camera,this.renderer.domElement),this.controls.enablePan=!1,this.controls.enableZoom=!1,this.controls.enableRotate=!1}},{key:"_setLight",value:function(){var e=new f.Ox3(16777215,1.1);e.position.set(2,10,5),this.scene.add(e);var t=new f.Mig(16777215,.3);this.scene.add(t)}},{key:"_createCube",value:function(){var e=this.config,t=e.cubeWidth,i=e.cubeHeight,s=e.cubeDeep,n=e.cubeColor,r=new f.DvJ(t,i,s),a=new f.YBo({color:n}),o=new f.Kj0(r,a);this.cubes.length&&(o.position.x=this.cubes[this.cubes.length-1].position.x,o.position.y=this.cubes[this.cubes.length-1].position.y,o.position.z=this.cubes[this.cubes.length-1].position.z,this.cubeStat.nextDir=Math.random()>.5?"left":"right","left"===this.cubeStat.nextDir?o.position.x=o.position.x-Math.round(4*Math.random()+6):o.position.z=o.position.z-Math.round(4*Math.random()+6)),this.cubes.push(o),this.cubes.length>5&&this.scene.remove(this.cubes.shift()),this.scene.add(o),this.cubes.length>1&&this._updateCameraPros()}},{key:"_createJumper",value:function(){var e=this.config,t=e.jumperWidth,i=e.jumperHeight,s=e.jumperDeep,n=e.jumperColor,r=new f.DvJ(t,i,s),a=new f.YBo({color:n});this.jumper=new f.Kj0(r,a),this.jumper.position.y=1,r.translate(0,1,0),this.scene.add(this.jumper)}},{key:"_updateCamera",value:function(){var e=this,t=this.cameraPros,i=t.current,s=t.next,n={x:i.x,y:i.y,z:i.z},r=s.x,a=(s.y,s.z);(n.x>r||n.z>a)&&(i.x-=.1,i.z-=.1,i.x-s.x<.05?i.x=s.x:i.z-s.z<.05&&(i.z=s.z)),this.camera.lookAt(new f.Pa4(n.x,0,n.z)),this._render(),requestAnimationFrame((function(){e._updateCamera()}))}},{key:"_updateCameraPros",value:function(){var e=this.cubes.length-1,t=this.cubes[e].position.x,i=this.cubes[e].position.z,s=this.cubes[e-1].position.x,n=this.cubes[e-1].position.z;this.cameraPros.next=new f.Pa4((t+s)/2,0,(i+n)/2)}},{key:"_setSize",value:function(){this.size.width=window.innerWidth,this.size.height=window.innerHeight}},{key:"_render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"_restart",value:function(){this.cameraPros={current:new f.Pa4(0,0,0),next:new f.Pa4},this.fallingStat={end:!1,speed:.2};var e=this.cubes.length;this.scene.remove(this.jumper);for(var t=0;t<e;t++)this.scene.remove(this.cubes.shift());this.score=0,this.successCallback(this.score),this._createCube(),this._createCube(),this._createJumper(),this._updateCamera()}}])&&b(t.prototype,i),s&&b(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){w(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var S=(0,s.defineComponent)({name:"tyt",setup:function(){var e=(0,s.reactive)({score:0,showMask:!1}),t=new j;(0,s.onMounted)((function(){t.init(),t._addFailedFn(i),t._addSuccessFn(n)}));var i=function(){e.score=t.score,e.showMask=!0},n=function(t){e.score=t};return _(_({},(0,s.toRefs)(e)),{},{restart:function(){e.showMask=!1,t._restart()}})}});const k=(0,i(3744).Z)(S,[["render",function(e,t,i,f,m,b){return(0,s.openBlock)(),(0,s.createElementBlock)("div",n,[(0,s.withDirectives)((0,s.createElementVNode)("div",r,[(0,s.createElementVNode)("div",a,[(0,s.createElementVNode)("div",o,[h,(0,s.createElementVNode)("h1",c,(0,s.toDisplayString)(e.score),1)]),(0,s.createElementVNode)("button",{class:"restart",onClick:t[0]||(t[0]=function(){return e.restart&&e.restart.apply(e,arguments)})}," 重新开始 ")])],512),[[s.vShow,e.showMask]]),(0,s.createElementVNode)("div",u,[(0,s.createElementVNode)("div",l,[p,(0,s.createElementVNode)("span",d,(0,s.toDisplayString)(e.score),1)])])])}],["__scopeId","data-v-18502305"]]);var x=k},3357:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return a}});var s=i(2005),n={class:"title"};var r=(0,s.defineComponent)({name:"index",setup:function(){var e=(0,s.ref)("渐进式JavaScript 框架-THREE");return(0,s.onMounted)((function(){})),{title:e}}});var a=(0,i(3744).Z)(r,[["render",function(e,t,i,r,a,o){return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createElementVNode)("p",n,(0,s.toDisplayString)(e.title),1)])}],["__scopeId","data-v-2ee39d73"]])}}]);