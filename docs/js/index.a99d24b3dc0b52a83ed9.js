(self.webpackChunkwebpack5_vue3_three_demo=self.webpackChunkwebpack5_vue3_three_demo||[]).push([[826],{2695:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(2005),a={id:"container"};n(9070),n(7941),n(2526),n(7327),n(1539),n(5003),n(4747),n(9337),n(3321);var o=n(2212),s=n(5841);function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=h((function e(){u(this,e);var t=new o.fHI(600,600,800,40,10);t.applyMatrix((new o.yGw).makeRotationX(-Math.PI/2));var i=new o.xoR({color:31134,transparent:!0,opacity:.6,shading:o.esl});this.mesh=new o.Kj0(t,i),this.mesh.receiveShadow=!0})),d=h((function e(){u(this,e),this.mesh=new o.Tme;var t=new o.DvJ(20,20,20),n=new o.xoR({color:Colors.white}),r=3+Math.floor(3*Math.random());for(i=0;i<r;i++){var a=new o.Kj0(t,n);a.position.x=15*i,a.position.y=10*Math.random(),a.position.z=10*Math.random(),a.rotation.z=Math.random()*Math.PI*2,a.rotation.y=Math.random()*Math.PI*2;var s=.1+.9*Math.random();a.scale.set(s,s,s),a.castShadow=!0,a.receiveShadow=!0,this.mesh.add(a)}})),p=h((function e(){u(this,e),this.mesh=new o.Tme,this.nClouds=20;for(var t=2*Math.PI/this.nClouds,i=0;i<this.nClouds;i++){var n=new d,r=t*i,a=750+200*Math.random();n.mesh.position.y=Math.sin(r)*a,n.mesh.position.x=Math.cos(r)*a,n.mesh.rotation.z=-Math.PI/2+r,n.mesh.position.z=-50-400*Math.random();var s=1+2*Math.random();n.mesh.scale.set(s,s,s),this.mesh.add(n.mesh)}}));function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var v=(0,r.defineComponent)({name:"fj",setup:function(){var e=(0,r.reactive)({controls:null,gui:null,scene:null,camera:null,renderer:null});(0,r.onMounted)((function(){t()}));var t=function(){i(),n(),a(),c(),h()},i=function(){e.controls=new function(){this.ambientLightColor="#dc8874"},e.gui=new s.XS,e.gui.addColor(e.controls,"ambientLightColor").onChange((function(e){ambientLight.color=new o.Ilk(e)}))},n=function(){var t=window.innerHeight,i=window.innerWidth;e.scene=new o.xsS,e.scene.fog=new o.ybr(16243114,100,950);var n=new o.Iis(200);e.scene.add(n);var r=i/t;e.camera=new o.cPb(50,r,.1,1e4),e.camera.position.x=0,e.camera.position.z=200,e.camera.position.y=100,e.renderer=new o.CP7({alpha:!0,antialias:!0}),e.renderer.setSize(i,t),e.renderer.shadowMap.enabled=!0,document.querySelector("#container").appendChild(e.renderer.domElement)},a=function(){var t=new o.vmT(12303291,0,.9),i=new o.Mig(e.controls.ambientLightColor),n=new o.Ox3(16777215,.9);n.castShadow=!0,n.shadow.camera.left=-400,n.shadow.camera.right=400,n.shadow.camera.top=400,n.shadow.camera.bottom=-400,n.shadow.camera.near=1,n.shadow.camera.far=1e3,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048,e.scene.add(t),e.scene.add(n),e.scene.add(i)},c=function(){var t=new l;t.mesh.position.y=-600,e.scene.add(t)},h=function(){var t=new p;t.mesh.position.y=-600,e.scene.add(t.mesh)};return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){f(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},(0,r.toRefs)(e))}});var g=(0,n(3744).Z)(v,[["render",function(e,t,i,n,o,s){return(0,r.openBlock)(),(0,r.createElementBlock)("div",a)}]])},223:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return M}});var n=i(2005),r=function(e){return(0,n.pushScopeId)("data-v-00f3548e"),e=e(),(0,n.popScopeId)(),e},a={id:"container"},o={class:"mask"},s={class:"content"},c={class:"score-container"},h=r((function(){return(0,n.createElementVNode)("p",{class:"title"},"本次得分",-1)})),u={class:"score"},l={class:"info"},d={class:"gaming-score"},p=(0,n.createTextVNode)(" 得分："),m={class:"current-score"},f=r((function(){return(0,n.createElementVNode)("div",{class:"model"},null,-1)}));i(9070),i(7941),i(2526),i(7327),i(1539),i(5003),i(4747),i(9337),i(3321),i(6699),i(2023);var v=i(2212),g=i(2886);function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=window.innerWidth,y=window.innerHeight,j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={background:2631720,ground:-1,cubeColor:12500670,cubeWidth:4,cubeHeight:2,cubeDeep:4,jumperColor:2302755,jumperWidth:1,jumperHeight:2,jumperDeep:1},this.score=0,this.scene=new v.xsS,this.camera=new v.iKG(w/-50,w/50,y/50,y/-50,0,5e3),this.cameraPros={current:new v.Pa4(0,0,0),next:new v.Pa4(0,0,0)},this.renderer=new v.CP7({antialias:!0}),this.size={width:w,height:y},this.cubes=[],this.cubeStat={nextDir:""},this.jumperStat={ready:!1,xSpeed:0,ySpeed:0},this.fallState={location:-1,distance:0},this.fallingStat={end:!1,speed:.2}}var t,i,n;return t=e,(i=[{key:"init",value:function(){var e=this;this._setCamera(),this._setRenderer(),this._setLight(),this._createCube(),this._createCube(),this._createJumper(),this._updateCamera(),this._handleWindowResize(),window.addEventListener("resize",(function(){e._handleWindowResize()}));var t=document.querySelector(".model");t.addEventListener("pointerdown",(function(){e._handleMouseDown()})),t.addEventListener("pointerup",(function(){e._handleMouseUp()}))}},{key:"_addSuccessFn",value:function(e){this.successCallback=e}},{key:"_addFailedFn",value:function(e){this.failedCallback=e}},{key:"_handleWindowResize",value:function(){this._setSize(),this.camera.left=this.size.width/-80,this.camera.right=this.size.width/80,this.camera.top=this.size.height/80,this.camera.bottom=this.size.height/-80,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.size.width,this.size.height),this._render()}},{key:"_handleMouseDown",value:function(){var e=this;!this.jumperStat.ready&&this.jumper.scale.y>.02&&(this.jumper.scale.y-=.01,this.jumperStat.xSpeed+=.004,this.jumperStat.ySpeed+=.008,this._render(),requestAnimationFrame((function(){e._handleMouseDown()})))}},{key:"_handleMouseUp",value:function(){var e=this;this.jumperStat.ready=!0,this.jumper.position.y>=1?(this.jumper.scale.y<1&&(this.jumper.scale.y+=.1),"left"==this.cubeStat.nextDir?this.jumper.position.x-=this.jumperStat.xSpeed:this.jumper.position.z-=this.jumperStat.xSpeed,this.jumper.position.y+=this.jumperStat.ySpeed,this.jumperStat.ySpeed-=.01,this._render(),requestAnimationFrame((function(){e._handleMouseUp()}))):(this.jumperStat.ready=!1,this.jumperStat.xSpeed=0,this.jumperStat.ySpeed=0,this.jumper.position.y=1,this.jumper.scale.y=1,this._checkInCube(),1==this.fallState.location?(this.score++,this._createCube(),this._updateCamera(),this.successCallback&&this.successCallback(this.score)):this._falling())}},{key:"_checkInCube",value:function(){var e,t,i=(this.config.jumperWidth+this.config.cubeWidth)/2;"left"==this.cubeStat.nextDir?(e=Math.abs(this.jumper.position.x-this.cubes[this.cubes.length-2].position.x),t=Math.abs(this.jumper.position.x-this.cubes[this.cubes.length-1].position.x)):(e=Math.abs(this.jumper.position.z-this.cubes[this.cubes.length-2].position.z),t=Math.abs(this.jumper.position.z-this.cubes[this.cubes.length-1].position.z)),e<i?(this.fallState.distance=e,this.fallState.location=e<this.config.cubeWidth/2?-1:-10):t<i?(this.fallState.distance=t,this.fallState.location=t<this.config.cubeWidth/2?1:10):this.fallState.location=0}},{key:"_falling",value:function(){10==this.fallState.location?"left"==this.cubeStat.nextDir?this.jumper.position.x>this.cubes[this.cubes.length-1].position.x?this._fallingRotate("leftBottom"):this._fallingRotate("leftTop"):this.jumper.position.z>this.cubes[this.cubes.length-1].position.z?this._fallingRotate("rightBottom"):this._fallingRotate("rightTop"):-10==this.fallState.location?"left"==this.cubeStat.nextDir?this._fallingRotate("leftTop"):this._fallingRotate("rightTop"):0==this.fallState.location&&this._fallingRotate("none")}},{key:"_fallingRotate",value:function(e){var t=this,i=this.fallState.distance-this.config.cubeWidth/2,n=e.includes("left")?"z":"x",r=this.jumper.rotation[n]+.1,a=this.jumper.rotation[n]<Math.PI/2,o=this.config.ground+this.config.jumperWidth/2+i;if("rightTop"===e)r=this.jumper.rotation[n]-.1,a=this.jumper.rotation[n]>-Math.PI/2;else if("rightBottom"===e)r=this.jumper.rotation[n]+.1,a=this.jumper.rotation[n]<Math.PI/2;else if("leftBottom"===e)r=this.jumper.rotation[n]-.1,a=this.jumper.rotation[n]>-Math.PI/2;else if("leftTop"===e)r=this.jumper.rotation[n]+.1,a=this.jumper.rotation[n]<Math.PI/2;else{if("none"!==e)throw Error("Arguments Error");a=!1,o=this.config.ground}this.fallingStat.end?this.failedCallback&&this.failedCallback():(a?this.jumper.rotation[n]=r:this.jumper.position.y>o?this.jumper.position.y-=.2:this.fallingStat.end=!0,this._render(),requestAnimationFrame((function(){t._falling()})))}},{key:"_setCamera",value:function(){this.camera.position.set(100,100,100),this.camera.lookAt(this.cameraPros.current)}},{key:"_setRenderer",value:function(){this.renderer.setSize(this.size.width,this.size.height),this.renderer.setClearColor(this.config.background),document.querySelector("#container").appendChild(this.renderer.domElement)}},{key:"_setControls",value:function(){this.controls=new g.z(this.camera,this.renderer.domElement),this.controls.enablePan=!1,this.controls.enableZoom=!1,this.controls.enableRotate=!1}},{key:"_setLight",value:function(){var e=new v.Ox3(16777215,1.1);e.position.set(2,10,5),this.scene.add(e);var t=new v.Mig(16777215,.3);this.scene.add(t)}},{key:"_createCube",value:function(){var e=this.config,t=e.cubeWidth,i=e.cubeHeight,n=e.cubeDeep,r=e.cubeColor,a=new v.DvJ(t,i,n),o=new v.YBo({color:r}),s=new v.Kj0(a,o);this.cubes.length&&(s.position.x=this.cubes[this.cubes.length-1].position.x,s.position.y=this.cubes[this.cubes.length-1].position.y,s.position.z=this.cubes[this.cubes.length-1].position.z,this.cubeStat.nextDir=Math.random()>.5?"left":"right","left"===this.cubeStat.nextDir?s.position.x=s.position.x-Math.round(4*Math.random()+6):s.position.z=s.position.z-Math.round(4*Math.random()+6)),this.cubes.push(s),this.cubes.length>5&&this.scene.remove(this.cubes.shift()),this.scene.add(s),this.cubes.length>1&&this._updateCameraPros()}},{key:"_createJumper",value:function(){var e=this.config,t=e.jumperWidth,i=e.jumperHeight,n=e.jumperDeep,r=e.jumperColor,a=new v.DvJ(t,i,n),o=new v.YBo({color:r});this.jumper=new v.Kj0(a,o),this.jumper.position.y=1,a.translate(0,1,0),this.scene.add(this.jumper)}},{key:"_updateCamera",value:function(){var e=this,t=this.cameraPros,i=t.current,n=t.next,r={x:i.x,y:i.y,z:i.z},a=n.x,o=(n.y,n.z);(r.x>a||r.z>o)&&(i.x-=.1,i.z-=.1,i.x-n.x<.05?i.x=n.x:i.z-n.z<.05&&(i.z=n.z)),this.camera.lookAt(new v.Pa4(r.x,0,r.z)),this._render(),requestAnimationFrame((function(){e._updateCamera()}))}},{key:"_updateCameraPros",value:function(){var e=this.cubes.length-1,t=this.cubes[e].position.x,i=this.cubes[e].position.z,n=this.cubes[e-1].position.x,r=this.cubes[e-1].position.z;this.cameraPros.next=new v.Pa4((t+n)/2,0,(i+r)/2)}},{key:"_setSize",value:function(){this.size.width=window.innerWidth,this.size.height=window.innerHeight}},{key:"_render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"_restart",value:function(){this.cameraPros={current:new v.Pa4(0,0,0),next:new v.Pa4},this.fallingStat={end:!1,speed:.2};var e=this.cubes.length;this.scene.remove(this.jumper);for(var t=0;t<e;t++)this.scene.remove(this.cubes.shift());this.score=0,this.successCallback(this.score),this._createCube(),this._createCube(),this._createJumper(),this._updateCamera()}}])&&b(t.prototype,i),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){C(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function C(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var k=(0,n.defineComponent)({name:"tyt",setup:function(){var e=(0,n.reactive)({score:0,showMask:!1}),t=new j;(0,n.onMounted)((function(){t.init(),t._addFailedFn(i),t._addSuccessFn(r)}));var i=function(){e.score=t.score,e.showMask=!0},r=function(t){e.score=t};return _(_({},(0,n.toRefs)(e)),{},{restart:function(){e.showMask=!1,t._restart()}})}});const x=(0,i(3744).Z)(k,[["render",function(e,t,i,r,v,g){return(0,n.openBlock)(),(0,n.createElementBlock)("div",a,[(0,n.withDirectives)((0,n.createElementVNode)("div",o,[(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("div",c,[h,(0,n.createElementVNode)("h1",u,(0,n.toDisplayString)(e.score),1)]),(0,n.createElementVNode)("button",{class:"restart",onClick:t[0]||(t[0]=function(){return e.restart&&e.restart.apply(e,arguments)})}," 重新开始 ")])],512),[[n.vShow,e.showMask]]),(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("div",d,[p,(0,n.createElementVNode)("span",m,(0,n.toDisplayString)(e.score),1)])]),f])}],["__scopeId","data-v-00f3548e"]]);var M=x},7649:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i(2005),r={class:"title"};i(1058);var a=i(8298),o=i.n(a),s=(0,n.defineComponent)({name:"index",setup:function(){var e=(0,n.ref)("渐进式JavaScript 框架-THREE");(0,n.onMounted)((function(){}));var t=[[parseInt(256,10),parseInt(222,10),parseInt(-54)],[parseInt(345,10),parseInt(288,10),parseInt(-55)],[parseInt(386,10),parseInt(184,10),parseInt(-72)]];o()(t);return{title:e}}});var c=(0,i(3744).Z)(s,[["render",function(e,t,i,a,o,s){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("p",r,(0,n.toDisplayString)(e.title),1)])}],["__scopeId","data-v-49a0b8c0"]])},4113:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var n=i(2005),r={class:"camera_outer"},a=["width","height"],o=["width","height"],s={key:0,class:"img_bg_camera"},c=["src"];i(1539),i(8674),i(6992),i(8783),i(3948),i(285),i(1637),i(4916),i(3123),i(4723),i(9575),i(2472),i(8012),i(2990),i(8927),i(3105),i(5035),i(4345),i(7174),i(2846),i(4731),i(7209),i(6319),i(8867),i(7789),i(3739),i(9368),i(4483),i(2056),i(3462),i(678),i(7462),i(3824),i(5021),i(2974),i(5016);var h={data:function(){return{videoWidth:300,videoHeight:300,imgSrc:"",thisCancas:null,thisContext:null,thisVideo:null}},mounted:function(){this.getCompetence()},methods:{getCompetence:function(){var e=this;this.thisCancas=document.getElementById("canvasCamera"),this.thisContext=this.thisCancas.getContext("2d"),this.thisVideo=document.getElementById("videoCamera"),void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;return t?new Promise((function(i,n){t.call(navigator,e,i,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});var t={audio:!1,video:{width:this.videoWidth,height:this.videoHeight,transform:"scaleX(-1)"}};navigator.mediaDevices.getUserMedia(t).then((function(t){"srcObject"in e.thisVideo?e.thisVideo.srcObject=t:e.thisVideo.src=window.URL.createObjectURL(t),e.thisVideo.onloadedmetadata=function(t){e.thisVideo.play()}})).catch((function(e){}))},setImage:function(){var e=this;e.thisContext.drawImage(e.thisVideo,0,0,e.videoWidth,e.videoHeight);var t=this.thisCancas.toDataURL("image/png");e.imgSrc=t,this.$emit("refreshDataList",this.imgSrc)},dataURLtoFile:function(e,t){for(var i=e.split(","),n=i[0].match(/:(.*?);/)[1],r=atob(i[1]),a=r.length,o=new Uint8Array(a);a--;)o[a]=r.charCodeAt(a);return new File([o],t,{type:n})},stopNavigator:function(){this.thisVideo.srcObject.getTracks()[0].stop()}}};var u=(0,i(3744).Z)(h,[["render",function(e,t,i,h,u,l){return(0,n.openBlock)(),(0,n.createElementBlock)("div",r,[(0,n.createElementVNode)("video",{id:"videoCamera",width:u.videoWidth,height:u.videoHeight,autoplay:""},null,8,a),(0,n.createElementVNode)("canvas",{style:{display:"none"},id:"canvasCamera",width:u.videoWidth,height:u.videoHeight},null,8,o),u.imgSrc?((0,n.openBlock)(),(0,n.createElementBlock)("div",s,[(0,n.createElementVNode)("img",{src:u.imgSrc,alt:"",class:"tx_img"},null,8,c)])):(0,n.createCommentVNode)("v-if",!0),(0,n.createElementVNode)("button",{onClick:t[0]||(t[0]=function(e){return l.getCompetence()})},"打开摄像头"),(0,n.createElementVNode)("button",{onClick:t[1]||(t[1]=function(e){return l.stopNavigator()})},"关闭摄像头"),(0,n.createElementVNode)("button",{onClick:t[2]||(t[2]=function(e){return l.setImage()})},"拍照")])}],["__scopeId","data-v-3461108c"]])}}]);